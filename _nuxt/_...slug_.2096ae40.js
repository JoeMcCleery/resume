import{u as C,f as h,P as x,g as M,$ as S,h as $,i as w,j as T,k as f,l as c,r as j,m as y,o as A,n as N,q as R,s as q}from"./entry.bf04bf29.js";import{u as B}from"./vue.f36acd1f.8c4e697e.js";function D(l,n){const{title:s,titleTemplate:u,...t}=l;return B({title:s,titleTemplate:u,_flatMeta:t},{...n,transform(a){const e=C({...a._flatMeta});return delete a._flatMeta,{...a,meta:e}}})}const I=async(l,n={},s={})=>{const u=`${JSON.stringify(n)}${l}`,t=h(`${u}-state`),a=x();if(M(()=>{t.value&&t.value.id&&S(t.value.id,e=>t.value=e,s)}),!t.value){const{data:e}=await a.get(`cdn/stories/${l}`,n);t.value=e.story}return t},V=$({__name:"[...slug]",emits:["pageLayout","pageColours"],async setup(l,{emit:n}){var g,m,_,d,k,v;let s,u;const t=n,a=q(),e=w().params.slug,o=([s,u]=T(()=>I("pages/"+(e&&e.length>0?e.join("/"):"home"),{version:a.public.storyblokVersion,resolve_links:"url"}).catch(r=>{throw r=JSON.parse(r),f({statusCode:r.status,statusMessage:r.response})})),s=await s,u(),s);if(o.value.status)throw f({statusCode:o.value.status,statusMessage:o.value.response});t("pageLayout",o.value.content.layout),t("pageColours",{light:{textColour:c(o.value.content.text_colour.color),backgroundColour:c(o.value.content.background_colour.color)},dark:{textColour:c(o.value.content.text_colour_dark.color),backgroundColour:c(o.value.content.background_colour_dark.color)}});const i=((_=(m=(g=o.value)==null?void 0:g.content)==null?void 0:m.seo)==null?void 0:_.title)||a.public.websiteTitle+(e&&e.length>0?` - ${e.join(" - ")}`:""),p=((v=(k=(d=o.value)==null?void 0:d.content)==null?void 0:k.seo)==null?void 0:v.description)||"";return D({title:i,ogTitle:i,description:p,ogDescription:p,ogImage:""}),(r,J)=>{const b=j("StoryblokComponent");return y(o)?(A(),N(b,{key:0,blok:y(o).content},null,8,["blok"])):R("",!0)}}});export{V as default};
