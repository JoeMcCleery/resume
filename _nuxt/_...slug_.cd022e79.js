import{u as y,f as b,P as C,g as h,$ as x,h as M,i as $,j as S,k as w,l as u,r as T,m as v,o as j,n as A,q as R,s as q}from"./entry.302cd157.js";import{u as B}from"./vue.f36acd1f.91cd035a.js";function D(l,n){const{title:s,titleTemplate:r,...e}=l;return B({title:s,titleTemplate:r,_flatMeta:e},{...n,transform(a){const t=y({...a._flatMeta});return delete a._flatMeta,{...a,meta:t}}})}const I=async(l,n={},s={})=>{const r=`${JSON.stringify(n)}${l}`,e=b(`${r}-state`),a=C();if(h(()=>{e.value&&e.value.id&&x(e.value.id,t=>e.value=t,s)}),!e.value){const{data:t}=await a.get(`cdn/stories/${l}`,n);e.value=t.story}return e},E=M({__name:"[...slug]",emits:["pageLayout","pageColours"],async setup(l,{emit:n}){var m,p,g,_,d,k;let s,r;const e=n,a=q(),t=$().params.slug,o=([s,r]=S(()=>I("pages/"+(t&&t.length>0?t.join("/"):"home"),{version:a.public.storyblokVersion,resolve_links:"url"})),s=await s,r(),s);if(o.value.status)throw w({statusCode:o.value.status,statusMessage:o.value.response});e("pageLayout",o.value.content.layout),e("pageColours",{light:{textColour:u(o.value.content.text_colour.color),backgroundColour:u(o.value.content.background_colour.color)},dark:{textColour:u(o.value.content.text_colour_dark.color),backgroundColour:u(o.value.content.background_colour_dark.color)}});const c=((g=(p=(m=o.value)==null?void 0:m.content)==null?void 0:p.seo)==null?void 0:g.title)||a.public.websiteTitle+(t&&t.length>0?` - ${t.join(" - ")}`:""),i=((k=(d=(_=o.value)==null?void 0:_.content)==null?void 0:d.seo)==null?void 0:k.description)||"";return D({title:c,ogTitle:c,description:i,ogDescription:i,ogImage:""}),(L,N)=>{const f=T("StoryblokComponent");return v(o)?(j(),A(f,{key:0,blok:v(o).content},null,8,["blok"])):R("",!0)}}});export{E as default};
